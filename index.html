<!DOCTYPE html>
<html>
<head>
  <title>MertTube</title>
  <style>
    body { font-family: Arial; max-width: 900px; margin: auto; background: #f4f4f4; padding: 20px; }
    header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    nav a { margin-left: 15px; text-decoration: none; color: #333; font-weight: bold; }
    .ads { background: #ddd; text-align: center; padding: 10px; margin: 10px 0; border-radius: 8px; }
    .shorts { display: flex; overflow-x: auto; margin-bottom: 20px; }
    .short-card { min-width: 200px; margin-right: 10px; background: white; padding: 10px; border-radius: 8px; }
    .video-card { background: white; padding: 15px; margin-bottom: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  </style>

  <!-- Firebase scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>
  <header>
    <div><strong>MertTube</strong></div>
    <nav>
      <a href="index.html">Home</a>
      <a href="upload.html">Upload</a>
      <a href="login.html">Login</a>
    </nav>
  </header>

  <h1>Welcome to MertTube</h1>

  <div class="ads">Ad Placeholder</div>

  <h3>Shorts</h3>
  <div class="shorts" id="shorts">
    <!-- Shorts videos will appear here -->
  </div>

  <h3>All Videos</h3>
  <div id="videos">
    <!-- Video feed will appear here -->
  </div>

  <div class="ads">Ad Placeholder</div>

  <script>
    // Firebase config with your project info
    const firebaseConfig = {
      apiKey: "AIzaSyD0zRu_CX84HZzalQXxP7pYM3YBWhF88rc",
      authDomain: "merttube-46b68.firebaseapp.com",
      projectId: "merttube-46b68",
      storageBucket: "merttube-46b68.appspot.com",
      messagingSenderId: "274195761415",
      appId: "1:274195761415:web:PUT_YOUR_WEB_APP_ID_HERE"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const videosContainer = document.getElementById('videos');
    const shortsContainer = document.getElementById('shorts');

    // Fetch videos from Firestore
    db.collection("videos").orderBy("upload_time", "desc").get()
      .then(snapshot => {
        snapshot.forEach(doc => {
          const video = doc.data();

          // Add to All Videos feed
          const el = document.createElement('div');
          el.className = "video-card";
          el.innerHTML = `
            <h2>${video.title}</h2>
            <p>${video.description}</p>
            <video width="640" controls>
              <source src="${video.video_url}" type="video/mp4">
            </video>
            <hr>
          `;
          videosContainer.appendChild(el);

          // Add to Shorts section if short: true
          if(video.short){
            const shortEl = document.createElement('div');
            shortEl.className = "short-card";
            shortEl.innerHTML = `
              <h4>${video.title}</h4>
              <video width="200" controls>
                <source src="${video.video_url}" type="video/mp4">
              </video>
            `;
            shortsContainer.appendChild(shortEl);
          }
        });
      })
      .catch(err => console.error(err));
  </script>
</body>
</html>
